# Elasticsearch
Elasticsearch - це потужний пошуковий движок, що дозволяє організувати ефективний пошук в базі даних. 

![](../src/images/logo.png)

Основним призначенням Elasticsearch є складний повнотекстовий пошук в базі з урахуванням морфології мови, контролем помилок і ранжуванням результатів за релевантністю.

Elasticsearch являє із себе noSQL базу даних з керуванням через HTTP запити і щільною інтеграцією з системою візуалізації даних (Kibana), системою збору подій і логів (Logstash) і різними інструментами аналізу даних.

## Хто використовує Elasticsearch
Завдяки широкому набору функціональних можливостей, особливо повнотекстовому пошуку по безлічі мов і аналітиці в реальному часі, Elasticsearch активно застосовується в різних Big Data системах великих та середніх підприємств по всьому світу. З найбільш відомих зарубіжних користувачів варто відзначити корпорації Netflix, IBM, Facebook, Amazon, GitHub, Wikimedia, CERN, Volkswagen, Microsoft, Mozilla, Adobe.

## Приклади використання Elasticsearch
* Реалізація пошуку по веб-сайту, наприклад пошук товарів в інтернет-магазині. В цьому випадку Elasticsearch індексує каталоги товарів, та надає можливості пошуку та припущення щодо автозаповнення.
* Зберігання журналів подій чи транзакцій, аналізування і добування даних для отримання тенденцій, статистик, висновків, аномалій. В даному випадку можна використовувати Logstash для збору, об'єднання, аналізу даних, і потім перенаправляти ці дані в Elasticsearch для подальшого опрацювання.
* Для розробки, наприклад, платформи по ціновому оповіщенню, що дозволяє досвідченим в цій сфері користувачам визначати правила типу «Я зацікавлений в придбанні електронного ґаджету XXX і я хочу бути оповіщеним якщо ціна у будь-якого постачальника впаде нижче XXX протягом наступного місяця». В даному випадку можна збирати ціни, індексувати їх в Elasticsearch і використовувати функцію зворотнього пошуку: зіставляти коливання цін з запитом користувача і при відповідності до запиту надсилати сповіщення.
* Для впровадження аналітики/Бізнес-аналітики в проект, коли треба швидко досліджувати, аналізувати, візуалізувати надзвичайно великі об'єми даних (мільйони чи мільярди записів). В даному випадку доцільно використання Elasticsearch для збереження даних і Kibana для побудови користувацьких панелей відображення і візуалізації необхідних аспектів. До того ж, можна використовувати агрегаційні функції Elasticsearch для здійснення комплексної бізнес-аналітики даних.

Elasticsearch розробляється компанією Elastic разом з пов'язаними проектами, званими Elastic Stack, - Elasticsearch, Logstash, Beats і Kibana.

Beats - легковагі агенти і відправники даних з різних пристроїв. Logstash збирає і обробляє дані зареєстрованих подій. За зберігання і пошук даних відповідає Elasticsearch. Kibana візуалізує дані через web-інтерфейс.

# Kibana

![](../src/images/kibana.png)

Kibana - це інструмент візуалізації, який створюється в журналах Elasticsearch і може відображати їх користувач у відео лінійного графіку, гістограмми, кругові діаграми та інше.
Elasticsearch працює як база даних, в якій збираються дані, і Kibana використовує дані з Elasticsearch для представлення даних користувачів, що містяться у вигляді гістограм, кругових діаграм, теплових карт, як показано нижче


## Переваги Kibana
Kibana пропонує наступні переваги для своїх користувачів:

* Зберігає інструмент візуалізації на основі браузера з відкритим вихідним кодом, який в основному використовується для аналізу великого обсягу журналів у відеолінійному графіці, гістограммах, кругових діаграмах, теплових картках і т.д.

* Просто і легко зрозуміти починаючим.

* Простота перетворення візуалізації та панелей інструментів у віджетах.

* Візуалізація холста допомагає легко аналізувати складні дані.

* Візуалізація Timelion в Кібані допомагає порівняти дані в обраному напрямку, щоб краще зрозуміти продуктивність.

# Dashboard-и в Kibana

## Створення dashboard-ів

Для створення dashboard-ів будемо використовувати логи та дані польотів Kibana "Sample flight data".
Завантажити дані можна таким чином:
1. Перейти за адресою http://localhost:5601 на домашню сторінку та натиснути: `Try our sample data`
![](../src/images/example1.png)

2. Натиснути `add data`, яка після завантаження перетвориться у `view data`
3. Натиснути `view data`
![](../src/images/example1_1.png)

Щоб створити новий dashboard неохідно в лівому меню натиснути на розділ створення Dashboard. Потрапивши туди, натискаємо на «Create dashboard» і потрапляємо на сторінку додавання об'єктів у в Dashboard.
![](../src/images/example1_2.png)

Далі натискаємо на кпопку «Create new», і система запропонує вибрати вид відображення даних. В Kibana їх досить велика кількість.
![](../src/images/example1_3.png)

## Vertical Bar
Для прикладу створимо графічне представлення «Vertical Bar». Для цього оберемо `Lens -> Stacked bar -> Bar`.
![](../src/images/example2.png)
Для демонстрації «Vertical Bar» створимо гістограму співвідношення хвилин, на які затримали польоти та кількість затриманих польотів на цей час.
Для створення графіки «Vertical Bar» нам необхідно вибрати джерело даних. Вибираємо покажчик Index Pattern, який створених за дефолтом у "Sample flight data".

![](../src/images/example2_1.png)

За замовчуванням, після вибору джерела даних з'являється один загальний графік. Налаштуємо его.

У блоці «Buckets» натиснемо кнопку «Add», виберемо «X-asis» і налаштуємо вісь Х. Відкладемо по ней тимчасові позначки вступу записів у лог. У поле «Aggregation» вибираємо «Histogram», а в «Field» вибираємо «FlightDelayMin», тобто по осі Х відкладаємо часові затримки польотів. «Minimum interval» запишемо як 30, тобто будемо рахувати кількість затримок на 0, 30, 60 і т.д. хвилин. У «Custom label» встановимо піпдис для осі Х.

![](../src/images/example2_2.png)

Налаштовувати гістограму по осі Y нам не потрібно, оскільки за замовчуванням у нас відображається загальне число затримок на певну кількість хвилині, що нам і потрібно. Можемо лише у «Custom label» встановити піпдис для осі Y.

![](../src/images/example2_3.png)

В результаті отримуємо таку гістограму:

![](../src/images/example2_4.png)

Далі нам потрібно відфільтрувати польоти, які не затримували. Для цього використаємо фільтр. Натискаємо на кнопку «Add filter». У полі «Field» вибираємо «FlightDelayMin», у полі «Operation» вибираємо «is not» (не є), у полі «Value» пишемо «0». Натискаємо на кнопку «Save», щоб зберети.

![](../src/images/example2_5.png)

Якщо дані не оновилися, натискаємо кнопку «Update», яка знаходиться у правому нижньому кутку екрану.

В результаті маємо таку кінцеву гістограму:

![](../src/images/example2_6.png)

## Donut Bar



# Матеріал підготувала 
Cтудентка групи ІВ-91
<br> *Яременко Влада* - [wladziaya](https://github.com/wladziaya)

